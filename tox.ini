[tox]
skipsdist = True
envlist = test

[testenv]

basepython = python3.7

passenv=
    TOXENV
    CI
    CI_*
    CIRCLECI
    CIRCLE_*
    TRAVIS
    TRAVIS_*
    APPVEYOR
    APPVEYOR_*
    CODECOV_TOKEN

deps =
     -r requirements.txt
     -r dev-requirements.txt
     -e {toxinidir}

[testenv:test]
commands =
   pytest --cov=mario --cov=tests {posargs}


[testenv:coverage]
commands =
   {envbindir}/python -m pip install  {toxinidir}
   python -m site
   pytest --cov=mario --cov=tests {posargs}
   coverage report -m
   cuv graph

[testenv:check]
deps =
   twine
   black
commands =
   twine check dist/*
   black --check src/


[testenv:codecov]
skip_install=True
deps=
    codecov
commands=
    python -c 'import sys; print(sys.version)'
    codecov
